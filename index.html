<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Global Cable Routing â€“ Latency Explorer</title>

  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="./src/css/styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="title">The Underwater Connections of the World</div>
  <p>
    Long before fiber optics and satellites, the worldâ€™s first undersea cables carried telegraph messages across oceans. Today, these cables form the backbone of the Internet, transmitting the majority of internationa data.
    These underwater highways connect countries, continents, and cultures, making global communication near-instantaneous. Every message, google search and videi we take for granted relies on this delicate network of glass fibers lying silently on the ocean floor.
  </p>
  <p class="tip">To start: pick a city to reveal how your data courses through these underwater highways and explore the paths it takes around the world.</p>

        <div class="subtitle"></div>
      </div>

    </div>

    <div class="intro-card">
      <h2>The Hidden Infrastructure of the Internet</h2>
      <p>Most international data travels through <strong>submarine cables</strong> laid across ocean floors. Pick a city to reveal how your data courses through these underwater highways.</p>
      <p class="tip">ðŸ’¡ Tip: Hover over any cable on the map to see its RFS date, length, and operators.</p>
    </div>

    <!-- Global Overview Section -->
    <section>
      <div class="section-divider">
        <span class="section-title">A Global Overview</span>
      </div>
      
      <!-- 1. The Underwater Connections -->
      <div id="map" class="card chart" style="margin-top: 16px;">
        <div class="panel-header">The Underwater Connections</div>
        <div id="mapVis"></div>
      </div>

      <!-- 2. Scatter Plot -->
      <div id="scatter" class="card chart" style="margin-top: 16px;">
        <div class="panel-header" style="padding: 8px 12px; font-size: 0.95rem;">How Does Distance Affect Latency?</div>
        <div class="scatter-description">
          The more distance between two cities, the more of an impact relay switching has. Moreover the route data travels between two cities generally become less direct. 
        </div>
        <div id="scatterVis"></div>
      </div>

      <!-- 3. Vulnerability Map -->
      <div class="card" style="margin-top: 16px;">
        <div class="panel-header" style="padding: 8px 12px; font-size: 0.95rem;">
            How connected is each Country
        </div>
        <div class="vulnerability-description">
          Cable cuts happen all the time. On average there are 3 cables cut per week, mostly due to human maritime activity. Countries with fewer undersea cables are more vulnerable to being cut off from the rest of the world.
        </div>
        <div id="vulnerabilityMap" style="height: 500px;"></div>
      </div>
    </section>

    <!-- Connectivity Section -->
    <section>
      <div class="section-divider">
        <span class="section-title">How connected is your city to the rest of the World?</span>
      </div>
      
      <div class="card" style="padding: 12px; margin-bottom: 12px;">
        <div class="control-group wide">
          <label for="connectivityInput">Select A City</label>
          <input 
            type="text" 
            id="connectivityInput" 
            list="cityOptions" 
            placeholder="e.g., Melbourne, AU"
          />
          <datalist id="cityOptions">
            <!-- Autogenerated; replaced at runtime -->
          </datalist>
        </div>
        <button id="connectivityButton" class="btn btn-primary" style="margin-top: 8px;">Explore Connectivity</button>
      </div>

      <!-- Main connectivity map with continent radial charts and overall performance to the left -->
      <div class="connectivity-layout" id="connectivityContent" style="display: none;">
        <!-- Left column: Continent charts + Overall Performance -->
        <div class="left-column">
          <!-- Continent Radial Charts Grid (3x2) -->
          <div class="continent-radials">
            <div class="continent-radial-item">
              <div class="continent-radial-label">N. America</div>
              <div id="radialNorthAmerica"></div>
            </div>
            <div class="continent-radial-item">
              <div class="continent-radial-label">Europe</div>
              <div id="radialEurope"></div>
            </div>
            <div class="continent-radial-item">
              <div class="continent-radial-label">Asia</div>
              <div id="radialAsia"></div>
            </div>
            <div class="continent-radial-item">
              <div class="continent-radial-label">Africa</div>
              <div id="radialAfrica"></div>
            </div>
            <div class="continent-radial-item">
              <div class="continent-radial-label">S. America</div>
              <div id="radialSouthAmerica"></div>
            </div>
            <div class="continent-radial-item">
              <div class="continent-radial-label">Oceania</div>
              <div id="radialOceania"></div>
            </div>
          </div>
          
          <!-- Overall Performance -->
          <div class="overall-performance">
            <div class="overall-performance-title">Overall Performance</div>
            <div id="rankLatency" style="display: flex; justify-content: center;"></div>
            <div id="rankEfficiency" style="font-size: 0.65rem; color: #6b7280; text-align: center; margin-top: 4px;"></div>
          </div>
        </div>
        
        <!-- Right: Main connectivity map (larger) -->
        <div id="connectivityMap" style="align-self: start;"></div>
      </div>
      
      <!-- Bottom: Continent Map and Cable Capacity Chart side by side -->
      <div class="bottom-layout" id="bottomContent" style="display: none;">
        <!-- Left Panel: Continent Map -->
        <div class="card continent-map-panel">
          <div class="panel-header" id="continentMapTitle" style="font-size: 0.85rem; padding: 6px 10px;">
            Country View â€“ Submarine Cables
          </div>
          <div class="cable-dependency-info">
            This city's traffic passes through 
            <strong id="cableDependencyCount" class="cable-dependency-count">calculating...</strong> 
            unique submarine cables
          </div>
          <div class="cable-landing-info">
            <strong>ðŸ”Œ <span id="countryCableCount2" class="country-cable-count">-</span> cables</strong> land in 
            <strong id="countryName2">this country</strong>
          </div>
          <div id="continentMapVis" class="chart-area"></div>
        </div>
      
        <!-- Right Panel: Cable Capacity Breakdown -->
        <div class="card capacity-panel">
          <div class="panel-header" style="font-size: 0.85rem; padding: 6px 10px;">
            Cable Capacity Breakdown
          </div>
          <div class="capacity-description">
            Distribution of cable types by capacity era
          </div>
          <!-- Total cable capacity -->
          <div class="capacity-total">
            <strong>Estimated Capacity:</strong>&nbsp;<strong id="totalCableCapacity" class="total-cable-capacity">-</strong>&nbsp;Tbps
          </div>
          <div id="cableCapacityChart" class="chart-area"></div>
        </div>
      </div>
      
    </section>

    <footer>
      <div class="footer-content">
        <div>
          <div class="footer-section-title">Data Sources</div>
          <div>
            Undersea Cable Data: <a href="https://github.com/telegeography/www.submarinecablemap.com" target="_blank">TeleGeography</a> | 
            Latency Data: <a href="https://wondernetwork.com/pings/" target="_blank">WonderNetwork Global Ping Statistics</a>, Azure Network Latency (2024)
          </div>
        </div>
        <div>
          <div class="footer-section-title">Created By Edward Tjanterik</div>
          <div>FIT3179 A2 | October 2025</div>
        </div>
      </div>
    </footer>
  </div>

  <script type="module" src="./src/js/main.js"></script>
</body>
</html>
